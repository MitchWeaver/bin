#!/bin/sh
#
# http://github.com/mitchweaver/bin
#
# v - edit things
#

edit() {
    if [ ! -t 0 ] ; then
        st -e nvim -n "$@"
    else
        nvim -n "$@"
    fi
}

[ "$1" = -- ] && shift

if [ -z "$1" ] ; then
    edit -c VimwikiIndex
elif [ -f "$1" ] ; then
    edit "$1"
else
    file=$(find $(dirname "$1") -type f -maxdepth 2 \
        -iname *"$1"* 2>/dev/null | head -n 1)
    if [ -f "$file" ] ; then
        edit "$file"
    else
        edit "$@"
    fi
fi
