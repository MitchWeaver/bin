#!/bin/sh
#
# http://github.com/mitchweaver/bin
#
# local backup to my pi via rsync
#

[ "$1" ] || set 'files images music src books'

d='pi:/mnt'
log=~/tmp/bkup.log
:>$log

copy() {
    rsync -rtvuh --progress --delete --partial \
        --exclude '*.\.git*' \
        --exclude '*ache*' \
        --exclude '*ookies*' "$@"
}

printf '%s\n\n' 'syncing...'

for f in $@ ; do
    >&2 printf '%s\n' "[*] $f"
    copy ~/$f/ $d/$f
done >>$log

printf '\n%s\n' 'done.'

rm $log
