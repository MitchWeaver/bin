#!/bin/sh
#
# http://github.com/mitchweaver/bin
#
# grab random pape from unsplash and rice it
#

dir=${HOME}/.cache/pape
file=$dir/$$-pape.png
url=http://source.unsplash.com/random/1920x1080
mkdir -p $dir

usage() { >&2 echo 'Usage: pape [-s] [-n]' ; exit 1 ; }

while [ "$1" ] ; do
    case $1 in
        -h) usage ;;
        -n) norice=true ; shift ;;
        -s) cp -fv $dir/last_pape.png ~/${file##*/} ; exit
    esac
done

curl -s -L -C - -o $file --url $url
cp -f $file $dir/last_pape.png
if [ "$norice" ] ; then
    background $file
else
    rice $file
fi
