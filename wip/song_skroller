#!/bin/sh
#
# http://github.com/mitchweaver/bin
#
# [generated by hellosh]
#

sock=${MPV_SOCKET:-/tmp/mpvsocket}
pipe=${XDG_CACHE_HOME:-~/.cache}/song_skroller
mkfifo $pipe 2>/dev/null

isplaying() {
    [ -S "$sock" ] || return 1
    : | nc -U -N -- "$sock" 2>/dev/null || return 1
}

while sleep 1 ; do
    isplaying || continue
    song
done | skroll -r >$pipe
