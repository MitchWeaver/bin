#!/bin/sh
#
# http://github.com/mitchweaver/bin
#
# get current song from mpvc
#

pgrep -x mpv >/dev/null || exit 1

res="$(mpvc -f '%artist%^^^%title%^^^%path%' 2>/dev/null)"

artist="${res%^^^*}"
artist="${artist%^^^*}"

title="${res#*^^^}"
title="${title%^^^*}"

case "$artist" in
    *'No files'*|*'property unavailable'*) ;;
    N/A*) echo "${res#*^^^*^^^}" ;;
    *)    echo "$artist - $title"
esac
