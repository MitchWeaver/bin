#!/bin/sh
#
# http://github.com/mitchweaver/bin
#
# get network interface
#
# ethernet preferred, if not plugged in use wifi (openbsd)
#

ifconfig 2>/dev/null | grep -oE '^[a-z]+.\ *' | \
while read -r int ; do 
    case $int in
        # do not consider pseudo-devices
        enc*|lo*|pflog*)
            continue
            ;;
        *)
            # check if ethernet, if it is and is plugged in, select it
            if ifconfig $int 2>/dev/null | grep Ethernet >/dev/null ; then
                if ifconfig $int 2>/dev/null | grep active >/dev/null ; then
                    echo $int
                    break
                fi
            # otherwise select the first wireless interface
            else
                echo $int
                break
            fi
    esac
done
