#!/bin/sh
#
# http://github.com/mitchweaver/dedit 
#
# Open and edit a file from given locations with dmenu
#

edit() { st -e $EDITOR "$@" ; }

# folders here will be indexed and sent to dmenu
folders="${HOME}/etc \
         ${HOME}/etc/config \
         ${HOME}/bin \
         ${HOME}/usr/bin \
         ${HOME}/usr/startpage \
         ${HOME}/tmp \
         ${HOME}/var/tmp \
         ${HOME}/var/files \
         ${HOME}/var/downloads \
         ${HOME}/var/files/commonly_edited \
         ${HOME}/bin/src/*"

sel="$(ls -HLap ${folders} | \
        { sort -u 2> /dev/null || uniq ; } | \
        grep -v / | \
        menu -p 'Edit:')"

[ -n "$sel" ] || exit 1

if [ -f "$sel" ] ; then
    edit "$sel"
else
    for f in ${folders} ; do
        if [ -f "$f"/"$sel" ] ; then
            edit "$f"/"$sel" &
        fi
    done
fi
